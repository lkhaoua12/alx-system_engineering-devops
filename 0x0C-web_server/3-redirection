#!/usr/bin/env bash
# configure / to echo hello world and /redirect_me to 301 moved permentely.

# updating the system and installing nginx.
sudo apt -y update
sudo apt install -y nginx

# configuring root /
echo "Hello World!" | sudo tee /var/www/html/index.html

# configure /redirect_me.
sudo sed -i "server_name _;/a \n\tlocation /redirect_me {\n\t\t rewrite ^/redirect_me https://www.youtube.com/watch?v=QH2-TGUlwu4 permanent;\n\t}" /etc/nginx/sites_availble

# configure error
echo "Ceci n'est pas une page" | sudo tee /var/www/html/not_found.html
sudo sed -i "server_name _;/a \n\terror_page 404 not_found.html;" /etc/nginx/sites_availble

# realoading the server.
sudo service nginx reload
